<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>4.1 Manifests and Directives 3.1.0</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/releases.html"><strong>2</strong><span>Release Notes</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/configuration.html"><strong>3</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/usage.html"><strong>4</strong><span>Usage</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/extending.html"><strong>5</strong><span>Extending Asset-Pipeline</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p></p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/configuration.html">&lt;&lt; <strong>3</strong><span>Configuration</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/extending.html"><strong>5</strong><span>Extending Asset-Pipeline</span> >></a></div>
                


                <div class="project">
                    <h1>4.1 Manifests and Directives - Reference Documentation</h1>

                    <p><strong>Authors:</strong> </p>

                    <p><strong>Version:</strong> 3.1.0</p>

                    
                </div>

                

                

<h2 id="directives">4.1 Manifests and Directives</h2>
Asset Pipeline controls asset depdencency by using a custom syntax with commands called "directives". These directives give more fine grained control over what needs included as well as load order.<p class="paragraph"/><h3>Manifest Files</h3><p class="paragraph"/>In the Grails asset pipeline, the concept of a manifest file exists. This is typically the root/parent JavaScript or CSS file which requires all of your application code. This file is then included into your application with a taglib.  Another comparison that can be made here is to the 'Resources Plugin' modules; the difference being, your manifest is kept within the source code of your JavaScript or CSS rather than within a separate file you keep having to jump back to.<p class="paragraph"/>An example JavaScript manifest called 'application.js' might look like this:<p class="paragraph"/><div class="code"><pre>//= require jquery/jquery
//= require_self
//= require_tree .
//= require_full_tree .</pre></div><p class="paragraph"/>Or an example stylesheet syntax may look like this:<p class="paragraph"/><div class="code"><pre>/&#42;
&#42;= require_self
&#42;= require header
&#42;= require navigation
&#42;= require_tree .
&#42;= require_full_tree .
&#42;= encoding UTF&#45;8
&#42;/</pre></div><p class="paragraph"/><h3>Directives</h3><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Directive</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>require</td><td>Includes a single file into the manifest</td></tr><tr class="table-even"><td>require_tree</td><td>Recursively includes all files and subdirectories in the path</td></tr><tr class="table-odd"><td>require_self</td><td>Inserts the body of the current file</td></tr><tr class="table-even"><td>require_full_tree</td><td>Include files from all plugins that contain the relative base path</td></tr><tr class="table-odd"><td>encoding</td><td>Set the processor encoding for this bundle (i.e. UTF-8 or ANSI or Latin1)</td></tr></table><p class="paragraph"/>In JavaScript files, the directive begins with '//='. These directives tell us which files should be injected into this JavaScript file and in what order.<p class="paragraph"/>The <code>require_tree</code> directive will tell asset-pipeline to recursively include all JavaScript in the specified directory. This will include JavaScript sorted in alphabetical order, but the ordering of this type of require should not be relied upon. You can adjust the require order of the <code>require_tree</code> directive by using directives within any sub-JavaScript file. For example, lets say we have a folder called 'models' with a Book and an Author. Let's go further and say we want to ensure the Book model requires author first in a require_tree. This can be done by simply adding "//=require author" at the top of book.js file.<p class="paragraph"/>The <code>require_full_tree</code> directive is an additional directive similar to <code>require_tree</code> except that it will include files from all plugins that contain the relative base path. This is helpful when developing an application that is split into multiple plugins.<p class="paragraph"/>The <code>require_self</code> directive allows you to control where in the manifest the contents of the current file should reside. If the <code>require_self</code> directive is not specified, the contents of the current file are appended to the end of the manifest.<p class="paragraph"/><blockquote class="note">
In the examples above, 2 different directive prefixes were shown, one for CSS, and one for JavaScript. It is important to note that the syntax of these directives can vary based on the file type and preprocessor definition. For example, CoffeeScript files begin with "#=".
</blockquote><p class="paragraph"/><h3>Dynamic Directives</h3><p class="paragraph"/>The asset-pipeline require directives also support the use of the Groovy Templates via the <code>GStringTemplateEngine</code>. This means you can use some conditional require situations based, for example, on the grails Environment.<p class="paragraph"/><div class="code"><pre>//= require $&#123;grails.util.Environment.currentEnvironment.toString() == 'DEVELOPMENT' ? 'ember.debug.js' : 'ember.prod.js'&#125;</pre></div>
or
<div class="code"><pre>//= require $&#123;grails.util.Environment.currentEnvironment == grails.util.Environment.DEVELOPMENT ? 'ember.debug.js' : 'ember.prod.js'&#125;</pre></div><p class="paragraph"/><blockquote class="note">
It is important to note that when prepping for a production release these conditionals are only evaluated in dev runtime and in war build. If you build a war in prod environment but start it up in staging, the evaluation will have already occurred in prod.
</blockquote>



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/configuration.html">&lt;&lt; <strong>3</strong><span>Configuration</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/extending.html"><strong>5</strong><span>Extending Asset-Pipeline</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Command Line</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/asset-clean.html">asset-clean</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/asset-compile.html">asset-compile</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/asset-precompile.html">asset-precompile</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Spring Beans</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Spring%20Beans/assetResourceLocator.html">assetResourceLocator</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Tags/assetPath.html">assetPath</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/assetPathExists.html">assetPathExists</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/deferredScripts.html">deferredScripts</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/image.html">image</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/javascript.html">javascript</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/link.html">link</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/script.html">script</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/stylesheet.html">stylesheet</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
