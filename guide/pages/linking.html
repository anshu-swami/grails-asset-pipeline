<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>4.3 Linking to Assets 3.1.0</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/releases.html"><strong>2</strong><span>Release Notes</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/configuration.html"><strong>3</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/usage.html"><strong>4</strong><span>Usage</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/extending.html"><strong>5</strong><span>Extending Asset-Pipeline</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p></p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/configuration.html">&lt;&lt; <strong>3</strong><span>Configuration</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/extending.html"><strong>5</strong><span>Extending Asset-Pipeline</span> >></a></div>
                


                <div class="project">
                    <h1>4.3 Linking to Assets - Reference Documentation</h1>

                    <p><strong>Authors:</strong> </p>

                    <p><strong>Version:</strong> 3.1.0</p>

                    
                </div>

                

                

<h2 id="linking">4.3 Linking to Assets</h2>
Asset Pipeline adds a few new taglibs to properly reference your assets. These taglibs automatically handle swapout of cache digest names during production use as well as any custom URL mapping changes.<p class="paragraph"/><h3>Views</h3><p class="paragraph"/><div class="code"><pre>&#60;head&#62;
  &#60;asset:javascript src=<span class="java&#45;quote">"application.js"</span>/&#62;
  &#60;asset:stylesheet src=<span class="java&#45;quote">"application.css"</span>/&#62;
&#60;/head&#62;</pre></div><p class="paragraph"/>The primary include tags, as shown above, are quite useful for including your relevant JavaScript or stylesheet files. Notice that you do not have to prefix with '/assets', as this is handled automatically by the tag.<p class="paragraph"/>In GSP views, you can also reference images included in the asset-pipeline with the following tag:<p class="paragraph"/><div class="code"><pre>&#60;asset:image src=<span class="java&#45;quote">"logo.png"</span> width=<span class="java&#45;quote">"200"</span> height=<span class="java&#45;quote">"200"</span>/&#62;</pre></div><p class="paragraph"/>Assets can also be referenced within subdirectories if required and simply require the use of the relative path.<p class="paragraph"/><div class="code"><pre>&#60;asset:image src=<span class="java&#45;quote">"icons/delete.png"</span>/&#62;</pre></div><p class="paragraph"/>It is also possible to return an assetPath as a string for injection in your own tags:<p class="paragraph"/><div class="code"><pre>&#60;link href=<span class="java&#45;quote">"$&#123;assetPath(src: 'manifest.json')&#125;"</span>/&#62;</pre></div><p class="paragraph"/>It is also possible to execute a code section only if an asset exists or to simply test for existence<p class="paragraph"/><div class="code"><pre>&#60;asset:assetPathExists src=<span class="java&#45;quote">"test.js"</span>&#62;
This will only be displayed <span class="java&#45;keyword">if</span> the asset exists
&#60;/asset:assetPathExists&#62;</pre></div><p class="paragraph"/>or<p class="paragraph"/><div class="code"><pre>asset.assetPathExists(src: 'test.js') //returns <span class="java&#45;keyword">true</span> or <span class="java&#45;keyword">false</span></pre></div><p class="paragraph"/>
<h3>Getting Resource</h3>
As of version 0.8.2 a new bean exists called <code>assetResourceLocator</code> This can be used to find assets by URI in both development and production mode.<p class="paragraph"/><div class="code"><pre>class ExampleService &#123;
  def assetResourceLocator<p class="paragraph"/>  def someMethod() &#123;
    Resource myResource = assetResourceLocator.findAssetForURI('test.css')
  &#125;
&#125;</pre></div><p class="paragraph"/>
<h3>Deferred Scripts</h3><p class="paragraph"/>Asset-Pipeline provides a set of tags that can be used to ensure script blocks are deferred to the end of your page. This is not recommended as its not very unobtrusive, but has been added to help newcomers upgrade existing apps from resources.<p class="paragraph"/><div class="code"><pre>&#60;asset:script type=<span class="java&#45;quote">"text/javascript"</span>&#62;
  console.log(<span class="java&#45;quote">"Hello World"</span>);
&#60;/asset:script&#62;
&#60;asset:script type=<span class="java&#45;quote">"text/javascript"</span>&#62;
  console.log(<span class="java&#45;quote">"Hello World 2"</span>);
&#60;/asset:script&#62;</pre></div><p class="paragraph"/>Now to render the output of these scripts simply use the following:<p class="paragraph"/><div class="code"><pre>&#60;asset:deferredScripts/&#62;</pre></div><p class="paragraph"/><h3>Stylesheet References</h3><p class="paragraph"/>Stylesheets commonly make reference to images and in some cases other CSS files using the '@import' directive. With the asset-pipeline in Grails, relative paths can be recalculated and automatically reference the proper file.
For example, if you have a CSS file that looks like this:<p class="paragraph"/><div class="code"><pre>body &#123;
	background: url('/assets/mybg.png') top left repeat&#45;all;
&#125;</pre></div><p class="paragraph"/>The generated output of this css file will be exactly the same:<p class="paragraph"/><div class="code"><pre>body &#123;
	background: url('/assets/mybg.png') top left repeat&#45;all;
&#125;</pre></div><p class="paragraph"/>But, if we use a relative path, the asset-pipeline understands this path and can recalculate a new relative path based on whatever root file may have required the CSS:<p class="paragraph"/><div class="code"><pre>body &#123;
	background: url('mybg.png') top left repeat&#45;all;
&#125;</pre></div><p class="paragraph"/>Would then become:<p class="paragraph"/><div class="code"><pre>body &#123;
	background: url('mybg&#45;a87c78f.png') top left repeat&#45;all;
&#125;</pre></div><p class="paragraph"/><blockquote class="note">
In production mode, your image references or CSS references will automatically get their cache-digested name appended to them when using relative paths. More on this later.
</blockquote>



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/configuration.html">&lt;&lt; <strong>3</strong><span>Configuration</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/extending.html"><strong>5</strong><span>Extending Asset-Pipeline</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Command Line</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/asset-clean.html">asset-clean</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/asset-compile.html">asset-compile</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Command%20Line/asset-precompile.html">asset-precompile</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Spring Beans</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Spring%20Beans/assetResourceLocator.html">assetResourceLocator</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Tags/assetPath.html">assetPath</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/assetPathExists.html">assetPathExists</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/deferredScripts.html">deferredScripts</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/image.html">image</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/javascript.html">javascript</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/link.html">link</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/script.html">script</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Tags/stylesheet.html">stylesheet</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
